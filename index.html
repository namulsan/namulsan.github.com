<!DOCTYPE html>
<html>
	<head>
	    <meta charset="utf-8">
	    <title>gh3</title>    
	</head>
	<body>
		<h1></h1>
		<h2></h2>
		<ul></ul>

  		<script src="jQuery.js"></script>
		<script src="underscore.js"></script>
		<script src="gh3.js"></script>
		
		<script>
    			var gistsList = $("ul");
    			var GistsOf = new Gh3.Gists(new Gh3.User("namulsan"));

    			GistsOf.fetch({page:1, per_page:15}, "next", function (err, res) {
				if(err) {
			      		throw "outch ..."
				}

      				console.log(GistsOf.getGists());

				GistsOf.eachGist(function (gist) {
					gistsList.append('<li>'+gist.description+" "+gist.id);
				});
			});

    			var AllGistsOf = new Gh3.Gists(new Gh3.User("namulsan"));
    			AllGistsOf.fetch({page:1, per_page:500}, null, function (err, res) {
				if(err) {
					throw "outch ..."
				}
				console.log("Filtered gists : ", AllGistsOf.filter(function (gist) {
					return gist.comments > 0;
				}));
    			});

    var oneGist = new Gh3.Gist({id:"2287018"});

    oneGist.fetchContents(function (err, res) {

      if(err) {
        throw "outch ..."
      }

      console.log("oneGist : ", oneGist);
      console.log("Files : ", oneGist.files);

      console.log(oneGist.getFileByName("use.thing.js").content);

      oneGist.eachFile(function (file) {
        console.log(file.filename, file.language, file.type, file.size);
      });
    });


    var anOtherGist = new Gh3.Gist({id:"1096826"});

    anOtherGist.fetchContents(function (err, res) {

      if(err) {
        throw "outch ..."
      }

      console.log("anOtherGist : ", anOtherGist);
      console.log("Files : ", anOtherGist.files);

      anOtherGist.fetchComments(function (err, res) {

        if(err) {
          throw "outch ..."
        }

        anOtherGist.eachComment(function (comment) {
          console.log(comment.body, "By ", comment.user.login);
        });
      });
    });

  </script>
</body>

</html>
